âœ… Phase 1: Frontend â€“ Collect Required Data
1. Add UI Fields (if not present)
âœ… amount: Already present.

ğŸ”½ transaction_type: Add dropdown (<select> with options like transfer, payment).

ğŸŒ geo_lat, geo_lon: Capture via navigator.geolocation.

ğŸ’» device_id: Generate/store a local UUID (e.g., via localStorage).

ğŸŒ ip_address: Fetch from external service like https://api.ipify.org?format=json.

2. Include These Fields in /predict Request
Modify frontend transaction.js to:

Add timestamp (new Date().toISOString()).

Gather geo, device, and IP info on page load or before predict call.

Construct the request payload using all collected fields.

âœ… Phase 2: Backend â€“ Enhance Feature Pipeline
3. Enhance /predict route
When backend receives the above payload:

Compute derived features:

time_of_day â†’ from timestamp

day_of_week â†’ from timestamp

avg_amount_last_10 â†’ from transaction history in MongoDB

txn_count_last_24h â†’ from transaction history

recipient_diversity â†’ count of unique recipients

is_known_recipient â†’ binary flag

geo_distance_km â†’ compare historical vs current geo_lat/lon

ip_change_flag â†’ compare IP/device with last transaction

4. Call model.predict_proba()
Use the pre-trained model to:

Compute probability.

Apply threshold (0.3) to determine is_fraud.

âœ… Phase 3: Display Fraud Result on Frontend
5. Frontend Reaction Based on Model Result
âœ… If is_fraud: 0 â†’ show â€œFraud Check Passedâ€.

âš ï¸ If is_fraud: 1 AND amount < 1000 â†’ show Secret Key override input.

â›” If is_fraud: 1 AND amount >= 1000 â†’ block and display fraud alert message.

ğŸ“Š Display score: â€œFraud Risk Score: 0.83 (High)â€ in UI.

âœ… Phase 4: Store New Context (Optional)
6. Store current geo, ip, and device_id
Append to each transaction.

For IP/device comparison, save last known values to user profile or recent transaction.

Summary of Work Units
Area	Task
Frontend	Add dropdown for transaction_type, collect geo/device/IP
Frontend	Include extra fields in /predict request
Frontend	Show fraud decision, override UI, fraud score
Backend	Extract features from payload + DB
Backend	Predict fraud, apply threshold, return decision + score
Backend	Optionally store geo/device/IP for comparison